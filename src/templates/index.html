<!DOCTYPE html>
<html>
<head>
    <title>Proactive Orchestrator Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { background-color: #1e1e2f; color: #ffffff; font-family: 'Courier New', monospace; padding: 20px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .card { background: #27293d; padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        h1 { color: #00d2ff; text-align: center; }
        h2 { color: #8f92a1; font-size: 16px; }
        .status { font-size: 24px; font-weight: bold; text-align: center; padding: 15px; border: 2px solid #333; margin-bottom: 20px; }
        .safe { border-color: #00f2c3; color: #00f2c3; }
        .danger { border-color: #fd5d93; color: #fd5d93; }
    </style>
</head>
<body>
    <h1>ðŸ§  PROACTIVE ORCHESTRATOR DASHBOARD</h1>
    
    <div id="statusBox" class="status">SYSTEM WAITING...</div>

    <div class="grid">
        <div class="card">
            <h2>CONTAINER LOAD (CPU %)</h2>
            <canvas id="cpuChart"></canvas>
        </div>
        <div class="card">
            <h2>AI DECISIONS (REPLICAS)</h2>
            <canvas id="replicaChart"></canvas>
        </div>
    </div>

    <script>
        const ctx1 = document.getElementById('cpuChart').getContext('2d');
        const ctx2 = document.getElementById('replicaChart').getContext('2d');

        const cpuChart = new Chart(ctx1, {
            type: 'line',
            data: { labels: [], datasets: [{ label: 'CPU Load', borderColor: '#fd5d93', borderWidth: 2, data: [] }] },
            options: { animation: false, scales: { y: { min: 0, max: 250 } } }
        });

        const repChart = new Chart(ctx2, {
            type: 'line',
            data: { labels: [], datasets: [{ label: 'Replicas', borderColor: '#00d2ff', borderWidth: 2, stepmed: true, data: [] }] },
            options: { animation: false, scales: { y: { min: 0, max: 5 } } }
        });

        setInterval(() => {
            fetch('/data').then(r => r.json()).then(data => {
                if (data.time && data.time.length > 0) {
                    cpuChart.data.labels = data.time;
                    cpuChart.data.datasets[0].data = data.cpu;
                    cpuChart.update();

                    repChart.data.labels = data.time;
                    repChart.data.datasets[0].data = data.replicas;
                    repChart.update();

                    const box = document.getElementById('statusBox');
                    box.innerText = data.status;
                    box.className = "status " + (data.status.includes("CRITICAL") ? "danger" : "safe");
                }
            });
        }, 1000);
    </script>
</body>
</html>